(this.webpackJsonpmern=this.webpackJsonpmern||[]).push([[0],{103:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){},154:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},161:function(e,t,a){},164:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(16),o=a.n(c),r=a(5),i=a(8),m=a(17),s=a.n(m),u=a(30),d=a(12),g=a.n(d),h=function(e){return g.a.get("/api/users/"+e)},f=function(e){return g.a.post("/api/users",e)},E=function(e){return g.a.post("/api/items",e)},p=function(e){return g.a.get("/api/items/user/"+e)},b=function(){return g.a.get("/api/items/")},I=function(e,t){return g.a.put("/api/users/"+e,t)},N=function(e,t){return g.a.put("/api/items/"+e,t)},v=function(e){return g.a.put("/api/items/"+e)},w=function(e){return g.a.post("/api/matches",e)},O=function(e){return g.a.get("/api/matches/user/"+e)},y=function(e,t){return g.a.put("/api/matches/"+e,t)},j=function(e){console.log(e),localStorage.setItem("itemData",JSON.stringify(e))},S=function(e){return g.a.get("/api/matches/"+e)},C=function(e){return g.a.delete("/api/matches/all/"+e)},x=function(e){return g.a.delete("/api/items/"+e)},k=function(e){return g.a.delete("/api/matches/"+e)},_=a(71),R=a.n(_),T=(a(39),a(45),a(103),a(181)),B=a(2);var D=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),m=Object(r.a)(o,2),d=m[0],g=m[1],E=function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.profileObj,g(a.googleId),n={email:a.email,firstName:a.givenName,lastName:a.familyName,image:a.imageUrl,googleId:a.googleId,listedItems:[]},h(a.googleId).then((function(e){e.data.length>0||f(n),c(!0)})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"hero-image"},l.a.createElement("div",{className:"container center"},l.a.createElement("div",{className:"row opening"},l.a.createElement(T.a.h1,{animate:{y:0,opacity:1},initial:{y:-250,opacity:0},transition:{delay:.5,duration:1,type:"spring",stiffness:150}},"Recycle your life!")),l.a.createElement("div",{className:"row"},l.a.createElement(T.a.img,{animate:{rotateZ:720,opacity:1,scale:1},initial:{opacity:0,scale:0},transition:{delay:.5,duration:1.5},whileHover:{rotateZ:180},src:"./../img/swapifylogo-S-vector.png",alt:"Swapify S Logo",class:"responsive-img"})),l.a.createElement("div",{className:"row login"},a?l.a.createElement(i.a,{push:!0,to:"/profile/".concat(d)}):null,l.a.createElement(R.a,{className:"loginBtn",clientId:"582713087977-59mpjc19jph6a912mbsb4l41ak8msu56.apps.googleusercontent.com",buttonText:"Get Swapp'n!",onSuccess:E,onFailure:function(e){console.log("Google Sign in was unsuccessful"),alert("please try logging in again"),console.log(e)},cookiePolicy:"single_host_origin",isSignedIn:!1,render:function(e){return l.a.createElement(T.a.a,{animate:{opacity:1},initial:{opacity:0,scale:0},transition:{delay:2,duration:1}},l.a.createElement(B.Button,{large:!0,className:"loginBtn z-depth-3",node:"a",style:{marginRight:"5px"},waves:"light",onClick:e.onClick},"Get Swapp'n!"))}})))),l.a.createElement("div",{className:"container center "},l.a.createElement("div",{className:"row howTo"},l.a.createElement(T.a.h2,{animate:{opacity:1},initial:{opacity:0},transition:{delay:3,duration:2}},"How Swapify works:"," ")),l.a.createElement(T.a.div,{className:"row howToRow",animate:{opacity:1},initial:{opacity:0},transition:{delay:3,duration:2},whileHover:{}},l.a.createElement(T.a.div,{animate:{opacity:1},initial:{opacity:0},whileHover:{scale:1.2},className:"row"},l.a.createElement("div",{className:"col l4 s6 right-align symbol1"},l.a.createElement(T.a.img,{src:"./../img/profileSymbol.png",alt:"Swapify Logo",height:"100px"})),l.a.createElement("div",{className:"col l6 center"},l.a.createElement(T.a.h4,{animate:{opacity:1,x:0},initial:{opacity:0,x:1e3},transition:{delay:3,duration:1},className:"how1"},"Sign into your Profile"))),l.a.createElement(T.a.div,{animate:{opacity:1},initial:{opacity:0},whileHover:{scale:1.2},className:"row"},l.a.createElement("div",{className:"col l4 s6 right-align symbol2"},l.a.createElement(T.a.img,{src:"./../img/addItemSymbol.png",alt:"Swapify Logo",height:"100px"})),l.a.createElement("div",{className:"col l6 center"},l.a.createElement(T.a.h4,{animate:{opacity:1,x:0},initial:{opacity:0,x:1e3},transition:{delay:3,duration:1},className:"how2"},"Add a new item to swap"))),l.a.createElement(T.a.div,{animate:{opacity:1},initial:{opacity:0},whileHover:{scale:1.2},className:"row"},l.a.createElement("div",{className:"col l4 s6 right-align symbol3"},l.a.createElement(T.a.img,{src:"./../img/swipeSymbol.png",alt:"Swapify Logo",height:"100px"})),l.a.createElement("div",{className:"col l6 center"},l.a.createElement(T.a.h4,{animate:{opacity:1,x:0},initial:{opacity:0,x:1e3},transition:{delay:3,duration:1},className:"how3"},"Swipe to swap & match"))),l.a.createElement(T.a.div,{animate:{opacity:1},initial:{opacity:0},whileHover:{scale:1.2},className:"row"},l.a.createElement("div",{className:"col l4 s6 right-align symbol4"},l.a.createElement(T.a.img,{src:"./../img/swapSymbol2.png",alt:"Swapify Logo",height:"100px"})),l.a.createElement("div",{className:"col l6 center"},l.a.createElement(T.a.h4,{animate:{opacity:1,x:0},initial:{opacity:0,x:1e3},transition:{delay:3,duration:1},className:"how4"},"Chat and swap with matches"))))))},P=a(22),A=function(e){return l.a.createElement(B.CollectionItem,{className:" valign-wrapper"},l.a.createElement(B.Col,{m:2,s:2},l.a.createElement("img",{alt:"",className:"circle",style:{height:"60px",width:"60px"},src:e.imageURL})),l.a.createElement(B.Col,{m:7,s:7},l.a.createElement("span",{className:"title",style:{height:"70px",lineHeight:"70px",paddingLeft:"0px",fontFamily:"proxima-nova, sans-serif",fontWeight:"700",fontStyle:"normal",fontSize:"20px",color:"#025159"}},e.itemName),l.a.createElement("span",{className:"description",style:{height:"70px",lineHeight:"70px",paddingLeft:"20px",fontFamily:"proxima-nova, sans-serif",fontWeight:"100",fontStyle:"normal",color:"#025159"}},e.itemDescription)),l.a.createElement(B.Col,{m:2,s:2},l.a.createElement("a",{className:"secondary-content",href:"/swipping/".concat(e.id,"/").concat(e.userData.googleId)},l.a.createElement("img",{src:"/img/S-logoBtn.png",onClick:function(){return j(e.id)},style:{height:"65px"}})),l.a.createElement(B.Button,{className:"btn-floating btn-large",onClick:function(){x(e.id).then((function(t){e.loadItems()}))},style:{backgroundColor:"#F20505"}},l.a.createElement("i",{className:"material-icons"},"delete"))))},M=(a(149),l.a.createContext({matchId:"",recentText:"",setChat:function(){},setNewText:function(){}})),L=function(e){var t={matchId:e.matchData.matchId},a=Object(n.useContext)(M),c=a.setChat,o=a.chatId,i=Object(n.useState)(!1),m=Object(r.a)(i,2),s=m[0],u=m[1],d=Object(n.useState)(0),g=Object(r.a)(d,2),f=g[0],E=g[1],p=Object(n.useState)(!1),b=Object(r.a)(p,2),I=b[0],N=b[1];function v(){N(!0),console.log(e.matchData)}return Object(n.useEffect)((function(){c({matchId:e.allMatches.data[0]._id}),h(e.matchData.otherUser).then((function(e){if(0===e.data[0].rating.length)E(0);else{for(var t=0,a=0;a<e.data[0].rating.length;a++)t+=e.data[0].rating[a];E(Math.round(t/e.data[0].rating.length))}}))}),[]),Object(n.useEffect)((function(){o.matchId===e.matchData.matchId?u(!0):u(!1)}),[o]),l.a.createElement("div",null,s?l.a.createElement(B.CollectionItem,{className:"avatar valign-wrapper",style:{backgroundColor:"#D3EEE3"}},l.a.createElement("a",{className:"noHover"},l.a.createElement("img",{alt:"",className:"circle userItemPicture",src:e.yourImageUrl})),l.a.createElement("a",{className:"noHover"},l.a.createElement("i",{className:"material-icons swapSymbol noHover"},"autorenew")),l.a.createElement("a",{className:"noHover"},l.a.createElement("img",{alt:"",className:"circle itemPicture noHover",src:e.imageURL}),l.a.createElement("i",{className:"material-icons ratingStar noHover"},"star"),l.a.createElement("p",{className:"ratingNumber noHover"},f)),l.a.createElement("a",{className:"secondary-content"},l.a.createElement("a",{className:"btn-floating btn-large infoButton",style:{backgroundColor:"#F28705"},onClick:function(){v()}},l.a.createElement("i",{className:"material-icons"},"info"))),l.a.createElement("a",{className:"secondary-content"},e.matchData.newText?l.a.createElement("a",{className:"btn-floating btn-large chatButton pulse",style:{backgroundColor:"#F28705"},onClick:function(){c(t)}},l.a.createElement("i",{className:"material-icons"},"chat")):l.a.createElement("a",{className:"btn-floating btn-large chatButton",style:{backgroundColor:"#F28705"},onClick:function(){c(t)}},l.a.createElement("i",{className:"material-icons"},"chat")))):l.a.createElement(B.CollectionItem,{className:"avatar valign-wrapper"},l.a.createElement("a",{className:"noHover"},l.a.createElement("img",{alt:"",className:"circle userItemPicture ",src:e.yourImageUrl})),l.a.createElement("a",{className:"noHover"},l.a.createElement("i",{className:"material-icons swapSymbol noHover"},"autorenew")),l.a.createElement("a",{className:"noHover"},l.a.createElement("img",{alt:"",className:"circle itemPicture noHover",src:e.imageURL}),l.a.createElement("i",{className:"material-icons ratingStar noHover"},"star"),l.a.createElement("p",{className:"ratingNumber"},f)),l.a.createElement("a",{className:"secondary-content"},l.a.createElement("a",{className:"btn-floating btn-large infoButton",style:{backgroundColor:"#F28705"},onClick:function(){v()}},l.a.createElement("i",{className:"material-icons"},"info"))),l.a.createElement("a",{className:"secondary-content"},e.matchData.newText?l.a.createElement("a",{className:"btn-floating btn-large chatButton pulse",style:{backgroundColor:"#F28705"},onClick:function(){c(t)}},l.a.createElement("i",{className:"material-icons"},"chat")):l.a.createElement("a",{className:"btn-floating btn-large chatButton",style:{backgroundColor:"#F28705"},onClick:function(){c(t)}},l.a.createElement("i",{className:"material-icons"},"chat")))),l.a.createElement(B.Modal,{open:I,className:"center-align",actions:[],options:{dismissible:!1}},l.a.createElement(B.Row,null,l.a.createElement(B.Col,{s:6},l.a.createElement("img",{src:e.matchData.userItemPhoto,className:"circle modalUserImage"})),l.a.createElement(B.Col,{s:6},l.a.createElement("img",{src:e.matchData.otherItemImage,className:"circle modalUserImage"}))),l.a.createElement(B.Row,null,l.a.createElement(B.Col,{s:6},l.a.createElement("h5",null,e.matchData.userItemName)),l.a.createElement(B.Col,{s:6},l.a.createElement("h5",null,e.matchData.otherItemName))),l.a.createElement("a",null,l.a.createElement(B.Button,{modal:"close",onClick:function(){N(!1)}},"Close"))))},F=a(77);a(150);var U=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=(t[0],t[1],Object(n.useState)(!1)),c=Object(r.a)(a,2),o=(c[0],c[1],Object(n.useState)([])),m=Object(r.a)(o,2),s=m[0],u=m[1],d=Object(n.useState)([]),g=Object(r.a)(d,2),f=(g[0],g[1]),E=Object(n.useState)({email:"",firstName:"",googleId:"",image:"",lastName:"",listedItems:[],rating:[]}),b=Object(r.a)(E,2),I=b[0],N=b[1],v=Object(n.useState)([""]),w=Object(r.a)(v,2),y=(w[0],w[1]),j=Object(n.useState)(),S=Object(r.a)(j,2),C=(S[0],S[1],Object(i.g)().id),x=Object(n.useState)(0),k=Object(r.a)(x,2),_=k[0],R=k[1],D=[];function M(){var e=[];s.forEach((function(t,a){e.push(t.imageURL)})),0!=s.length&&(console.log(e),y(e))}function L(){p(I.googleId).then((function(e){u(e.data)})),O(I.googleId).then((function(e){e.data.forEach((function(t){if(t.item1Owner===I.googleId){var a={userItemId:t.item1Id,userId:t.item1Owner,userItemPhoto:t.item1Photo,userItemName:t.item1Name,otherItemId:t.item2Id,otherUser:t.item2Owner,otherItemImage:t.item2Photo,otherItemName:t.item2Name};D.push(a),e.data.length===D.length&&f(D)}else{var n={userItemId:t.item2Id,userId:t.item2Owner,userItemPhoto:t.item2Photo,userItemName:t.item2Name,otherItemId:t.item1Id,otherUser:t.item1Owner,otherItemImage:t.item1Photo,otherItemName:t.item1Name};D.push(n),e.data.length===D.length&&f(D)}}))}))}return Object(n.useEffect)((function(){L(),M(),h(C).then((function(e){var t={email:e.data[0].email,firstName:e.data[0].firstName,googleId:e.data[0].googleId,image:e.data[0].image,lastName:e.data[0].lastName,listedItems:e.data[0].listedItems,rating:e.data[0].rating};if(N(t),0===e.data[0].rating.length)R(0);else{for(var a=0,n=0;n<e.data[0].rating.length;n++)a+=e.data[0].rating[n];R(Math.round(a/e.data[0].rating.length))}}))}),[]),Object(n.useEffect)((function(){L(),M()}),[I]),l.a.createElement("div",null,l.a.createElement("div",{className:"container center-align",style:{marginTop:"20px"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col m12 s12 "},l.a.createElement(T.a.img,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},alt:"",className:"circle z-depth-3",style:{height:"150px",width:"150px",marginTop:"50px"},src:I.image}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col m12 s12 center-align","data-tip":"Your Swapify rating"},l.a.createElement(T.a.div,{animate:{opacity:1},initial:{opacity:0},transition:{duration:.2,delay:.2},className:"col m12 s12 center-align"},Array(_).fill().map((function(e,t){return l.a.createElement("i",{className:"material-icons",key:t,style:{color:"#F25D27"}},"star")})),Array(5-_).fill().map((function(e,t){return l.a.createElement("i",{className:"material-icons",key:t,style:{color:"#F25D27"}},"star_border")}))),l.a.createElement(F.a,{place:"bottom",type:"light",effect:"float"}))),l.a.createElement(B.Row,{className:"valign-wrapper"}),l.a.createElement(B.Row,null,l.a.createElement("div",{className:"col m12 s12 "},l.a.createElement(T.a.h2,{animate:{opacity:1},initial:{opacity:0},transition:{duration:1},style:{color:"#03A696"},className:"userName"},I.firstName," ",I.lastName))),l.a.createElement(B.Row,{className:"valign-wrapper"},l.a.createElement(B.Col,{m:8,s:8,className:"right-align"},l.a.createElement("h4",{style:{color:"#025159"}},"Add Item")),l.a.createElement(B.Col,{m:6,s:6,className:"left-align"},l.a.createElement(B.Button,{floating:!0,large:!0,style:{backgroundColor:"#F25D27"}},l.a.createElement(P.b,{to:"/createItem/".concat(I.googleId)},l.a.createElement("i",{className:"material-icons"},"add"))))),l.a.createElement(B.Row,{style:{paddingTop:"10px"}},l.a.createElement("h3",{style:{fontFamily:"lemon",color:"#03A696",paddingBottom:"20px"}},"Your Items"),l.a.createElement(B.Collection,{style:{maxHeight:"1000px",overflow:"scroll"}},s.map((function(e,t){return l.a.createElement(A,{key:t,loadItems:L,imageURL:e.imageURL,itemName:e.itemName,id:e._id,itemDescription:e.itemDescription,userData:I})})))),l.a.createElement(B.Row,{style:{height:"400px"}})))},H=a(35),W=(a(165),a(166),{apiKey:"AIzaSyDhXv_Ip1AQOyJwOp1INy3iocNkp3biMF4",authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDhXv_Ip1AQOyJwOp1INy3iocNkp3biMF4",REACT_APP_FIREBASE_APP_ID:"1:133644331634:web:395ae8cb57e8ba3883b0eb",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-YRN7X1QCM9",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"133644331634",REACT_APP_FIREBASE_STORAGEBUCKET:"swapify-85d2c.appspot.com",REACT_APP_GOOGLE_CLIENT_ID:"582713087977-59mpjc19jph6a912mbsb4l41ak8msu56.apps.googleusercontent.com"}).REACT_APP_FIREBASE_AUTHDOMAIN,projectId:"swapify-85d2c",storageBucket:"swapify-85d2c.appspot.com",messagingSenderId:"133644331634",appId:"1:133644331634:web:395ae8cb57e8ba3883b0eb",measurementId:"G-YRN7X1QCM9"});H.a.initializeApp(W);var G=H.a.storage(),V=H.a.firestore();a(151);function z(e){var t=Object(n.useState)([]),a=Object(r.a)(t,2),c=(a[0],a[1]),o=Object(n.useState)([]),i=Object(r.a)(o,2),m=i[0],d=i[1],g=Object(n.useState)([]),h=Object(r.a)(g,2),f=h[0],E=h[1],b=Object(n.useState)(!1),I=Object(r.a)(b,2),N=I[0],v=I[1],w=e.userData,y=Object(n.useContext)(M).recentText,j=[];Object(n.useEffect)((function(){p(w.googleId).then((function(e){c(e.data)})),O(w.googleId).then((function(e){0===e.data.length&&v(!0),E(e),e.data.forEach((function(t){if(t.item1Owner===w.googleId){var a={userItemId:t.item1Id,userId:t.item1Owner,userItemPhoto:t.item1Photo,userItemName:t.item1Name,otherItemId:t.item2Id,otherUser:t.item2Owner,otherItemImage:t.item2Photo,otherItemName:t.item2Name,matchId:t._id,newText:t.item1NewText};j.push(a),e.data.length===j.length&&S(j).then((function(e){d(e)}))}else{var n={userItemId:t.item2Id,userId:t.item2Owner,userItemPhoto:t.item2Photo,userItemName:t.item2Name,otherItemId:t.item1Id,otherUser:t.item1Owner,otherItemImage:t.item1Photo,otherItemName:t.item1Name,matchId:t._id,newText:t.item2NewText};j.push(n),e.data.length===j.length&&S(j).then((function(e){d(e)}))}}))}))}),[y,e]);var S=function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=12;break}a=0;case 2:if(!(a<t.length)){e.next=10;break}return e.next=5,V.collection("".concat(t[a].matchId)).orderBy("createdAt","desc").limit(1).get();case 5:(n=e.sent)._delegate._snapshot.docChanges[0]&&(t[a].latestText=n._delegate._snapshot.docChanges[0].doc.data.partialValue.mapValue.fields.text.stringValue,t[a].textTime=n._delegate._snapshot.docChanges[0].doc.data.partialValue.mapValue.fields.createdAt.timestampValue);case 7:a++,e.next=2;break;case 10:return l=t.sort((function(e,t){var a=new Date(e.textTime);return new Date(t.textTime)-a})),e.abrupt("return",l);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){S(m).then((function(e){d(e)}))}),[y]),l.a.createElement("div",null,l.a.createElement(B.SideNav,{fixed:!0,trigger:l.a.createElement(B.Button,{floating:!0,large:!0,className:"chatSideNavTrigger"},l.a.createElement("i",{class:"material-icons"},"chat"))},l.a.createElement(B.Collection,{className:"chatCollection"},m.map((function(e){return l.a.createElement(L,{yourImageUrl:e.userItemPhoto,imageURL:e.otherItemImage,matchData:e,allMatches:f})})))),l.a.createElement(B.Modal,{open:N,className:"center-align",actions:[],options:{dismissible:!1}},l.a.createElement("h3",null,"No Chats!"),l.a.createElement("br",null),l.a.createElement("div",null,"You don't have any open chats!"),l.a.createElement("div",null,"Go make some matches first!"),l.a.createElement("br",null),l.a.createElement("a",{href:"/profile/".concat(w.googleId)},l.a.createElement(B.Button,null,"Go Back"))))}var Y=a(72);a(152);function K(e){var t=e.userData,a=e.message,n=a.text,c=a.sentFromid,o=a.sentFromPhoto,r=c===t.googleId?"sent":"received";return l.a.createElement("div",{className:"message ".concat(r)},l.a.createElement("img",{className:"itemPhoto",src:o}),l.a.createElement("p",null,n))}a(153);var q=a(44);function J(e){var t=e.userData,a=Object(n.useContext)(M),c=a.chatId,o=a.setNewText,i=Object(n.useState)(V.collection("empty")),m=Object(r.a)(i,2),d=m[0],g=m[1],f=d.orderBy("createdAt"),E=Object(Y.a)(f,{idField:"id"}),p=Object(r.a)(E,1)[0],b=Object(n.useState)(""),v=Object(r.a)(b,2),w=v[0],O=v[1],j=Object(n.useRef)(),_=Object(n.useState)({}),R=Object(r.a)(_,2),T=R[0],D=R[1],P=Object(n.useState)({}),A=Object(r.a)(P,2),L=A[0],F=A[1],U=l.a.createRef(),W=Object(n.useState)(!1),G=Object(r.a)(W,2),z=G[0],J=G[1],Q=Object(n.useState)(0),X=Object(r.a)(Q,2),Z=X[0],$=X[1];Object(n.useEffect)((function(){g(V.collection(c.matchId||"empty")),S(c.matchId).then((function(e){e.data.item1Owner===t.googleId?(D({id:e.data.item1Owner,photoURL:e.data.item1Photo}),F({id:e.data.item2Owner,photoURL:e.data.item2Photo})):(D({id:e.data.item2Owner,photoURL:e.data.item2Photo}),F({id:e.data.item1Owner,photoURL:e.data.item1Photo}))})),setTimeout((function(){j.current.scrollIntoView({behavior:"smooth"})}),500)}),[c]);var ee=function(){var e=Object(u.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),S(c.matchId).then((function(e){if(e.data.item1Owner===t.googleId){y(c.matchId,{item2NewText:!0,item1NewText:!1})}else{y(c.matchId,{item1NewText:!0,item2NewText:!1})}})),o(w),e.next=5,d.add({text:w,createdAt:H.a.firestore.FieldValue.serverTimestamp(),sentFromid:T.id,sentToid:L.id,sentFromPhoto:T.photoURL,setToPhoto:L.photoURL});case 5:O(""),j.current.scrollIntoView({behavior:"smooth"});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("div",null,l.a.createElement("div",{className:"container"},l.a.createElement(B.Modal,{open:z,className:"center-align",actions:[],options:{dismissible:!1}},l.a.createElement("h3",null,"Match Deleted!"),l.a.createElement("br",null),l.a.createElement("div",null,"Would you like to rate the other user?"),l.a.createElement("br",null),l.a.createElement(q.a,{emptySymbol:l.a.createElement("i",{className:"material-icons"},"star_border"),fullSymbol:l.a.createElement("i",{className:"material-icons"},"star"),onChange:function(e){return $(e)}}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("a",null,l.a.createElement(B.Button,{onClick:function(){h(L.id).then((function(e){var t=e.data[0].rating;t.push(Z);var a={rating:t};I(L.id,a).then((function(e){window.location.reload()}))}))},modal:"close"},"Submit Rating")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("a",null,l.a.createElement(B.Button,{onClick:function(){window.location.reload()},modal:"close"},"No Thanks"))),l.a.createElement(B.Row,{className:"wrapper"},p&&p.map((function(e){return l.a.createElement(K,{key:e.id,message:e,userData:t})})),l.a.createElement("div",{ref:j}),l.a.createElement("div",{ref:U}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null)),l.a.createElement("div",{className:"chatControls"},l.a.createElement(B.Row,null,l.a.createElement(B.Col,{s:12},l.a.createElement("form",{onSubmit:ee},l.a.createElement(B.Col,{s:10},l.a.createElement("input",{value:w,required:!0,className:"chatForm",onChange:function(e){return O(e.target.value)}})),l.a.createElement(B.Col,{s:2},l.a.createElement("button",{type:"submit",className:"btn-floating btn-large waves-effect waves-light sendButton"},l.a.createElement("i",{className:"material-icons"},"send")))))),l.a.createElement(B.Row,null,l.a.createElement(B.Col,{s:6,className:"center-align"},l.a.createElement(B.Modal,{className:"center-align",id:"Modal-Swap",trigger:l.a.createElement(B.Button,{node:"button",className:"swapItemsButton"},"SWAP ITEMS")},l.a.createElement("h3",null,"Swap Items?"),l.a.createElement("br",null),l.a.createElement("div",null,"If you press confirm your item will be no longer listed on Swapify. Only do this after swapping items."),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("a",null,l.a.createElement(B.Button,{onClick:function(){S(c.matchId).then((function(e){console.log(e),e.data.item1Owner===t.googleId?C(e.data.item1Id).then((function(t){x(e.data.item1Id).then((function(t){N(e.data.item2Id,{deleteItem:e.data.item1Owner}).then((function(e){J(!0)}))}))})):C(e.data.item2Id).then((function(t){x(e.data.item2Id).then((function(t){N(e.data.item1Id,{deleteItem:e.data.item2Owner}).then((function(e){J(!0)}))}))}))}))},modal:"close"},"Confirm")))),l.a.createElement(B.Col,{s:6,className:"center-align"},l.a.createElement(B.Modal,{className:"center-align",id:"Modal-Swap",trigger:l.a.createElement(B.Button,{node:"button",className:"deleteMatchButton"},"DELETE MATCH")},l.a.createElement("h3",null,"Delete Match?"),l.a.createElement("br",null),l.a.createElement("div",null,"If you press confirm your match will be deleted from Swapify."),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("a",null,l.a.createElement(B.Button,{onClick:function(){k(c.matchId).then((function(e){J(!0)}))},modal:"close"},"Confirm"))))))))}a(154);var Q=function(){var e=Object(n.useState)("empty"),t=Object(r.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),m=Object(r.a)(o,2),s=m[0],u=m[1],d=Object(n.useState)(2),g=Object(r.a)(d,2),f=g[0],E=g[1],p=Object(n.useState)({email:"",firstName:"",googleId:"",image:"",lastName:"",listedItems:[],rating:[]}),b=Object(r.a)(p,2),I=b[0],N=b[1],v=Object(i.g)().id;return Object(n.useEffect)((function(){h(v).then((function(e){var t={email:e.data[0].email,firstName:e.data[0].firstName,googleId:e.data[0].googleId,image:e.data[0].image,lastName:e.data[0].lastName,listedItems:e.data[0].listedItems,rating:e.data[0].rating};N(t)}))}),[]),l.a.createElement("div",{className:"chatBackground"},l.a.createElement(M.Provider,{value:{chatId:a,recentText:s,setChat:function(e){c(e),S(e.matchId).then((function(t){if(I.googleId===t.data.item1Owner&&!0===t.data.item1NewText){y(e.matchId,{item1NewText:!1}),E(Math.floor(1e5*Math.random()))}else if(I.googleId===t.data.item2Owner&&!0===t.data.item2NewText){y(e.matchId,{item2NewText:!1}),E(Math.floor(1e5*Math.random()))}}))},setNewText:function(e){u(e)}}},l.a.createElement(B.Row,null,l.a.createElement(B.Col,{s:0,m:4},l.a.createElement(z,{newText:f,userData:I})),l.a.createElement(B.Col,{s:12,m:8},l.a.createElement(J,{userData:I})))))},X=a(38);function Z(e){return l.a.createElement("div",{className:"form-group"},l.a.createElement("textarea",Object.assign({className:"form-control materialize-textarea",rows:"20"},e)))}function $(e){return l.a.createElement("button",Object.assign({},e,{style:{display:"block",width:"100%",marginBottom:10,backgroundColor:"#F28705",height:"50px"},className:"btn btn-success"}),e.children)}var ee=a(51),te=a.n(ee),ae=a(73),ne=a.n(ae);var le=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),m=Object(r.a)(o,2),s=m[0],u=m[1],d=Object(n.useState)([]),g=Object(r.a)(d,2),f=g[0],p=g[1],b=Object(n.useState)(null),N=Object(r.a)(b,2),v=N[0],w=N[1],O=Object(n.useState)(!1),y=Object(r.a)(O,2),j=y[0],S=y[1],C=Object(n.useState)(""),x=Object(r.a)(C,2),k=x[0],_=x[1],R=Object(n.useState)("Preview"),T=Object(r.a)(R,2),D=T[0],P=T[1],A=Object(n.useState)([""]),M=Object(r.a)(A,2),L=M[0],F=M[1],U=Object(n.useState)(!1),H=Object(r.a)(U,2),W=H[0],V=H[1],z=Object(i.g)().id,Y=Object(n.useState)({email:"",firstName:"",googleId:"",image:"",lastName:"",listedItems:[],rating:[]}),K=Object(r.a)(Y,2),q=K[0],J=K[1];function Q(e){F([e.coords.latitude,e.coords.longitude])}Object(n.useEffect)((function(){h(z).then((function(e){var t={email:e.data[0].email,firstName:e.data[0].firstName,googleId:e.data[0].googleId,image:e.data[0].image,lastName:e.data[0].lastName,listedItems:e.data[0].listedItems,rating:e.data[0].rating};J(t)})),null===q&&S(!0),document.getElementById("fileBox").addEventListener("click",(function(e){})),navigator.geolocation?navigator.geolocation.getCurrentPosition(Q):alert="Geolocation is not supported by this browser."}),[]);var ee=function(){new te.a(v,{quality:.2,success:function(e){var t=Math.floor(1e8*Math.random());G.ref("images/".concat(t+v.name)).put(e).on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){G.ref("images").child(t+v.name).getDownloadURL().then((function(e){!function(e){var t={itemName:f.name,itemDescription:s.description,itemPrice:45,imageURL:"".concat(e),itemOwner:q.googleId,likesFromItems:[],likesItems:[],seenItems:[],itemLocation:L};E(t).then((function(e){var t=e.data._id;h(q.googleId).then((function(e){var a={listedItems:e.data[0].listedItems};a.listedItems.push(t),I(q.googleId,a),console.log("save to database run")}))}))}(e),_(e),console.log("fileupload handler run"),c(!a),setTimeout((function(){return V(!0)}),3e3)}))}))},error:function(e){console.log(e.message)}})};return l.a.createElement("div",{className:"container",style:{marginTop:"50px"}},j?l.a.createElement(i.a,{push:!0,to:"/"}):null,l.a.createElement(Z,{onChange:function(e){var t=e.target.value;p(Object(X.a)(Object(X.a)({},f),{},{name:t}))},name:"name",placeholder:"Add a name for your item",style:{color:"#025159"}}),l.a.createElement("form",{action:"#"},l.a.createElement("div",{className:"file-field input-field"},l.a.createElement("div",{className:"btn",style:{color:"#D4EEE3"}},l.a.createElement("input",{type:"file",id:"fileBox",onChange:function(e){e.target.files[0]&&w(e.target.files[0])},style:{color:"#03A696"}}),l.a.createElement("i",{class:"material-icons"},"file_upload")),l.a.createElement("div",{className:"file-path-wrapper"},l.a.createElement("input",{className:"file-path validate",type:"text",placeholder:"Choose a photo",style:{color:"#025159"}})))),l.a.createElement("div",{className:"center-align"},k&&l.a.createElement("img",{className:"responsive-img",src:k,style:{maxWidth:"50%",height:"auto"}})),l.a.createElement(Z,{onChange:function(e){var t=e.target.value;u(Object(X.a)(Object(X.a)({},s),{},{description:t}))},name:"description",placeholder:"Add a description",style:{color:"#025159"}}),l.a.createElement("div",{className:"container right-align"},l.a.createElement(B.Row,null,l.a.createElement(B.Col,{s:6,m:6}),l.a.createElement(B.Col,{s:6,m:6},l.a.createElement(ne.a,{id:"confetti",active:a,className:"right-align"})))),l.a.createElement($,{id:"mainFileBtn",onClick:function(){"Preview"===D?(new te.a(v,{quality:.2,success:function(e){var t=Math.floor(1e8*Math.random());G.ref("images/".concat(t+v.name)).put(e).on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){G.ref("images").child(t+v.name).getDownloadURL().then((function(e){_(e)}))}))},error:function(e){console.log(e.message)}}),P("Upload")):ee()},style:{display:"block",width:"100%"}},D),W?l.a.createElement(i.a,{to:"/profile/".concat(q.googleId)}):"")},ce=a(9),oe=a(36);a(158);var re=function(e){(0,oe.b.createSliderWithTooltip)(oe.b.Range);var t=oe.b.Handle;return l.a.createElement("div",null,l.a.createElement("div",{className:"center-align"},l.a.createElement(oe.b,{min:0,max:50,defaultValue:e.distanceBoundary,handle:function(e){var a=e.value,n=e.dragging,c=e.index,o=Object(ce.a)(e,["value","dragging","index"]);return l.a.createElement(oe.a,{prefixCls:"rc-slider-tooltip",overlay:"".concat(a," Miles"),visible:n,placement:"top",key:c},l.a.createElement(t,Object.assign({value:a},o)))},onAfterChange:function(t){return e.setDistanceBoundary(t)}})))},ie=!1;var me=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),m=Object(r.a)(o,2),d=m[0],g=m[1],f=Object(n.useState)([]),E=Object(r.a)(f,2),I=E[0],O=E[1],y=Object(n.useState)(!1),j=Object(r.a)(y,2),S=j[0],C=j[1],x=Object(n.useState)(0),k=Object(r.a)(x,2),_=k[0],R=k[1],T=Object(n.useState)(!1),D=Object(r.a)(T,2),P=D[0],A=D[1],M=Object(n.useState)(50),L=Object(r.a)(M,2),F=L[0],U=L[1],H=Object(n.useState)(""),W=Object(r.a)(H,2),G=W[0],V=W[1],z=Object(n.useState)(""),Y=Object(r.a)(z,2),K=Y[0],q=Y[1],J=Object(i.g)(),Q=J.id,X=J.item,Z=Object(n.useState)({email:"",firstName:"",googleId:"",image:"",lastName:"",listedItems:[],rating:[]}),$=Object(r.a)(Z,2),ee=$[0],te=$[1];Object(n.useEffect)((function(){h(Q).then((function(e){var t={email:e.data[0].email,firstName:e.data[0].firstName,googleId:e.data[0].googleId,image:e.data[0].image,lastName:e.data[0].lastName,listedItems:e.data[0].listedItems,rating:e.data[0].rating};te(t)}))}),[]),Object(n.useEffect)((function(){(function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){navigator.geolocation.getCurrentPosition(e,t)}));case 2:return t=e.sent,e.abrupt("return",[t.coords.latitude,t.coords.longitude]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(e){p(ee.googleId).then((function(t){for(var a=0;a<t.data.length;a++){var n={itemLocation:e};N(t.data[a]._id,n)}}))}));null===ee&&c(!0),b().then((function(e){var t=e.data.filter((function(e){return e._id!==X}));v(X).then((function(e){for(var a=e.data.seenItems,n=0;n<a.length;n++)for(var l=0;l<t.length;l++)a[n]===t[l]._id&&(t.splice(l,1),0===t.length&&C(!0));for(var c=0;c<t.length;c++)t[c].likesItems.includes(X)&&t.unshift(t.splice(c,1)[0]);v(X).then((function(e){console.log(e);for(var a=[],n=function(n){var l=t[n].itemLocation[0],c=t[n].itemLocation[1],o=e.data.itemLocation[0],r=e.data.itemLocation[1];ae(l,c,o,r).then((function(e){e<F&&a.push(t[n]),0===a.length?(console.log(a),C(!0)):(g(a),O(a[_]))}))},l=0;l<t.length;l++)n(l)}))}))}))}),[F]);var ae=function(){var e=Object(u.a)(s.a.mark((function e(t,a,n,l){var c,o,r,i,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 6371,c=ne(n-t),o=ne(l-a),r=Math.sin(c/2)*Math.sin(c/2)+Math.cos(ne(t))*Math.cos(ne(n))*Math.sin(o/2)*Math.sin(o/2),i=2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)),m=6371*i,e.abrupt("return",m/1.609344);case 7:case"end":return e.stop()}}),e)})));return function(t,a,n,l){return e.apply(this,arguments)}}();function ne(e){return e*(Math.PI/180)}return Object(n.useEffect)((function(){!0===ie&&(_===d.length?C(!0):O(d[_]))}),[_]),l.a.createElement("div",null,a?l.a.createElement(i.a,{push:!0,to:"/"}):null,l.a.createElement("div",{className:"container center-align",style:{marginTop:"20px"}},l.a.createElement(B.Row,null,l.a.createElement(B.Col,{s:12},l.a.createElement("h4",null,I.itemName),l.a.createElement("h5",null,I.itemDescription),l.a.createElement("img",{className:"itemImage",src:I.imageURL}))),l.a.createElement(B.Row,null,l.a.createElement(B.Col,{s:6},l.a.createElement("button",{onClick:function(){ie=!0,v(X).then((function(e){var t={seenItems:e.data.seenItems};t.seenItems.push(I._id),N(X,t).then((function(e){R(_+1)}))}))}},"Not Interested")),l.a.createElement(B.Col,{s:6},l.a.createElement("button",{onClick:function(){ie=!0,v(X).then((function(e){var t={seenItems:e.data.seenItems,likesItems:e.data.likesItems};t.seenItems.push(I._id),t.likesItems.push(I._id),N(X,t).then((function(t){v(I._id).then((function(t){console.log(t);var a={likesFromItems:t.data.likesFromItems};a.likesFromItems.push(X),N(I._id,a).then((function(a){for(var n=0;n<e.data.likesFromItems.length;n++)if(e.data.likesFromItems[n]===I._id){A(!0),V(e.data.imageURL),q(I.imageURL);var l={item1Id:X,item1Owner:ee.googleId,item1Photo:e.data.imageURL,item1Name:e.data.itemName,item2Id:I._id,item2Owner:t.data.itemOwner,item2Photo:t.data.imageURL,item2Name:t.data.itemName,item2Read:!1};w(l).then((function(e){}))}R(_+1)}))}))}))}))}},"Interested"))),l.a.createElement(B.Row,{className:"center-align"},l.a.createElement(B.Col,{s:3}),l.a.createElement(B.Col,{s:6},l.a.createElement(re,{className:"center-align",setDistanceBoundary:function(e){U(e)},distanceBoundary:F})),l.a.createElement(B.Col,{s:3}))),l.a.createElement(B.Modal,{open:S,className:"center-align",actions:[],options:{dismissible:!1}},l.a.createElement("h3",null,"No more items available!"),l.a.createElement("br",null),l.a.createElement("div",null,"Add a new item, switch items to swap with, or try back later!"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("a",{href:"/profile/".concat(ee.googleId)},l.a.createElement(B.Button,null,"Back to my Profile")),l.a.createElement("br",null)),l.a.createElement(B.Modal,{open:P,className:"center-align",actions:[],options:{dismissible:!1}},l.a.createElement("h3",null,"It's a match!"),l.a.createElement("img",{src:G,className:"circle swapItemImage"}),l.a.createElement("img",{src:K,className:"circle swapItemImage"}),l.a.createElement("br",null),l.a.createElement("div",null,"Head to the chat page or continue swipping!"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("a",{href:"/chat/".concat(ee.googleId)},l.a.createElement(B.Button,null,"Chat Page")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("a",null,l.a.createElement(B.Button,{modal:"close"},"Continue")),l.a.createElement("br",null)))},se=a(182),ue=(a(159),function(e){var t=Object(n.useState)(!1),a=Object(r.a)(t,2),c=a[0],o=a[1],m=Object(n.useState)({}),s=Object(r.a)(m,2),u=s[0],d=s[1],g=Object(n.useState)(!1),f=Object(r.a)(g,2),E=f[0],p=f[1],b=Object(n.useState)(!1),I=Object(r.a)(b,2),N=I[0],v=I[1],w=Object(i.f)().pathname,y=w.split("/"),j=y[y.length-1];function S(){var e=0;u&&O(u.googleId).then((function(t){for(var a=0;a<t.data.length;a++)(t.data[a].item1Owner===u.googleId&&!0===t.data[a].item1NewText||t.data[a].item2Owner===u.googleId&&!0===t.data[a].item2NewText)&&e++;o(0!==e)}))}return console.log(w),Object(n.useEffect)((function(){S(),setInterval((function(){S()}),5e3)}),[u]),Object(n.useEffect)((function(){"chat"===y[1]?p(!0):p(!1),v("/"===w)}),[w]),Object(n.useEffect)((function(){h(j).then((function(e){var t={email:e.data[0].email,firstName:e.data[0].firstName,googleId:e.data[0].googleId,image:e.data[0].image,lastName:e.data[0].lastName,listedItems:e.data[0].listedItems,rating:e.data[0].rating};d(t)}))}),[]),!0===N?l.a.createElement(B.Navbar,{alignLinks:"right",brand:l.a.createElement("a",{className:"brand-logo",href:"/"},l.a.createElement("img",{src:"./../img/swapifyLogoTopDark-vector.png",height:"125"})),centerChildren:!0,className:"navbar transparent z-depth-0",id:"mobile-nav",menuIcon:c?l.a.createElement(se.a,{variant:"dot",color:"secondary",className:"chatBadge"},l.a.createElement(B.Icon,{className:"swapIcon"},"menu")):l.a.createElement(se.a,{color:"secondary",className:"chatBadge"},l.a.createElement(B.Icon,{className:"swapIcon"},"menu")),options:{draggable:!0,edge:"right",inDuration:250,onCloseEnd:null,onCloseStart:null,onOpenEnd:null,onOpenStart:null,outDuration:200,preventScrolling:!0}}):!0===E?l.a.createElement(B.Navbar,{alignLinks:"right",brand:l.a.createElement("a",{className:"brand-logo",href:"/"},l.a.createElement("img",{src:"./../img/swapifyLogoTopDark-vector.png",height:"125"})),centerLogo:!0,centerChildren:!0,className:"navbar transparent z-depth-0",id:"mobile-nav",menuIcon:c?l.a.createElement(se.a,{variant:"dot",color:"secondary",className:"chatBadge"},l.a.createElement(B.Icon,{className:"swapIcon"},"menu")):l.a.createElement(se.a,{color:"secondary",className:"chatBadge"},l.a.createElement(B.Icon,{className:"swapIcon"},"menu")),options:{draggable:!0,edge:"right",inDuration:250,onCloseEnd:null,onCloseStart:null,onOpenEnd:null,onOpenStart:null,outDuration:200,preventScrolling:!0}},l.a.createElement(B.NavItem,{tooltip:"Add Item",href:"/createItem/".concat(u.googleId),className:"addItem","alt-text":"add item",node:"button"},l.a.createElement(B.Icon,{tooltip:"Add Item",node:"button"},"add_circle")),l.a.createElement(B.NavItem,{href:"/profile/".concat(u.googleId),className:"profile"},l.a.createElement(B.Icon,null,"person")),l.a.createElement(B.NavItem,{href:"/chat/".concat(u.googleId),className:"swapIconWrapper"},c?l.a.createElement(se.a,{variant:"dot",color:"secondary",className:"chatBadge"},l.a.createElement(B.Icon,{className:"swapIcon"},"all_inclusive")):l.a.createElement(se.a,{color:"secondary",className:"chatBadge"},l.a.createElement(B.Icon,{className:"swapIcon"},"all_inclusive")))):l.a.createElement(B.Navbar,{alignLinks:"right",brand:l.a.createElement("a",{className:"brand-logo",href:"/"},l.a.createElement("img",{src:"./../img/swapifyLogoTopDark-vector.png",height:"125"})),centerChildren:!0,className:"navbar transparent z-depth-0",id:"mobile-nav",menuIcon:c?l.a.createElement(se.a,{variant:"dot",color:"secondary",className:"chatBadge"},l.a.createElement(B.Icon,{className:"swapIcon"},"menu")):l.a.createElement(se.a,{color:"secondary",className:"chatBadge"},l.a.createElement(B.Icon,{className:"swapIcon"},"menu")),options:{draggable:!0,edge:"right",inDuration:250,onCloseEnd:null,onCloseStart:null,onOpenEnd:null,onOpenStart:null,outDuration:200,preventScrolling:!0}},l.a.createElement(B.NavItem,{tooltip:"Add Item",href:"/createItem/".concat(u.googleId),className:"addItem","alt-text":"add item",node:"button"},l.a.createElement(B.Icon,{tooltip:"Add Item",node:"button"},"add_circle")),l.a.createElement(B.NavItem,{href:"/profile/".concat(u.googleId),className:"profile"},l.a.createElement(B.Icon,null,"person")),l.a.createElement(B.NavItem,{href:"/chat/".concat(u.googleId),className:"swapIconWrapper"},c?l.a.createElement(se.a,{variant:"dot",color:"secondary",className:"chatBadge"},l.a.createElement(B.Icon,{className:"swapIcon"},"all_inclusive")):l.a.createElement(se.a,{color:"secondary",className:"chatBadge"},l.a.createElement(B.Icon,{className:"swapIcon"},"all_inclusive"))))}),de=(a(160),function(e){return l.a.createElement("div",{className:"stickyFooter center"},l.a.createElement(B.Footer,{copyrights:"\xa9 2021 Swapify"}))});a(161);var ge=function(){var e=Object(i.f)().pathname.split("/"),t=e[e.length-1],a=Object(n.useState)(!1),c=Object(r.a)(a,2),o=c[0],m=c[1],s=Object(n.useState)(!1),u=Object(r.a)(s,2),d=u[0],g=u[1],f=Object(n.useState)(""),E=Object(r.a)(f,2),b=E[0],v=E[1],w=Object(n.useState)(""),j=Object(r.a)(w,2),S=j[0],C=j[1],k=Object(n.useState)(""),_=Object(r.a)(k,2),R=_[0],T=_[1],P=Object(n.useState)(""),A=Object(r.a)(P,2),M=A[0],L=A[1],F=Object(n.useState)(!1),H=Object(r.a)(F,2),W=H[0],G=H[1],V=Object(n.useState)(0),z=Object(r.a)(V,2),Y=z[0],K=z[1],J=Object(n.useState)(""),X=Object(r.a)(J,2),Z=X[0],$=X[1];return setInterval((function(){t&&p(t).then((function(e){for(var t=0;t<e.data.length;t++)"false"!==e.data[t].deleteItem&&($(e.data[t].deleteItem),v(e.data[t].imageURL),C(e.data[t]._id),m(!0))}))}),5e3),setInterval((function(){t&&O(t).then((function(e){for(var a=function(a){if(e.data[a].item2Owner==t&&!1===e.data[a].item2Read){y(e.data[a]._id,{item2Read:!0}).then((function(t){g(!0),T(e.data[a].item1Photo),L(e.data[a].item2Photo)}))}},n=0;n<e.data.length;n++)a(n)}))}),5e3),l.a.createElement("div",null,l.a.createElement(ue,null),l.a.createElement(i.b,{exact:!0,path:"/",component:D}),l.a.createElement(i.b,{path:"/profile/:id",component:U}),l.a.createElement(i.b,{exact:!0,path:"/createItem/:id",component:le}),l.a.createElement(i.b,{exact:!0,path:"/swipping/:item/:id",component:me}),l.a.createElement(i.b,{exact:!0,path:"/chat/:id",component:Q}),window.location.pathname.includes("/chat/")?null:l.a.createElement(de,null),l.a.createElement(B.Modal,{open:o,className:"center-align",actions:[],options:{dismissible:!1}},l.a.createElement("h3",null,"Warning"),l.a.createElement("img",{src:b,className:"circle swapItemImage"}),l.a.createElement("br",null),l.a.createElement("div",null,"Another user has alerted us that you have swapped items with them."),l.a.createElement("div",null,"If you confirm, your item will be deleted from Swapify."),l.a.createElement("div",null,"If you deny, you can continue swapping with your item."),l.a.createElement("br",null),l.a.createElement("a",null,l.a.createElement(B.Button,{onClick:function(){x(S).then((function(e){G(!0)}))},modal:"close"},"Confirm")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("a",null,l.a.createElement(B.Button,{onClick:function(){N(S,{deleteItem:!1}).then((function(e){G(!0)}))},modal:"close"},"Deny"))),l.a.createElement(B.Modal,{open:d,className:"center-align"},l.a.createElement("h3",null,"You have a new Match!"),l.a.createElement("img",{src:R,className:"circle swapItemImage"}),l.a.createElement("img",{src:M,className:"circle swapItemImage"}),l.a.createElement("br",null),l.a.createElement("div",null,"Go to the Chat Page to make the swap!"),l.a.createElement("br",null)),l.a.createElement(B.Modal,{open:W,className:"center-align",actions:[],options:{dismissible:!1}},l.a.createElement("h3",null,"Match Deleted!"),l.a.createElement("br",null),l.a.createElement("div",null,"Would you like to rate the other user?"),l.a.createElement("br",null),l.a.createElement(q.a,{emptySymbol:l.a.createElement("i",{className:"material-icons"},"star_border"),fullSymbol:l.a.createElement("i",{className:"material-icons"},"star"),onChange:function(e){return K(e)}}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("a",null,l.a.createElement(B.Button,{onClick:function(){h(Z).then((function(e){console.log(e.data[0].rating);var t=e.data[0].rating;t.push(Y),I(Z,{rating:t}).then((function(e){window.location.reload()}))}))},modal:"close"},"Submit Rating")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("a",null,l.a.createElement(B.Button,{modal:"close"},"No Thanks"))))},he=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function fe(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(162),a(163);o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(P.a,null,l.a.createElement(ge,null))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");he?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):fe(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):fe(e)}))}}()},45:function(e,t,a){},80:function(e,t,a){e.exports=a(164)}},[[80,1,2]]]);
//# sourceMappingURL=main.e86ca531.chunk.js.map